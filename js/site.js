var website = '{ website: { id: "5016d42984ae3ecc9e018d91", identifier: "five-demo", siteTitle: "VSSL", siteTagLine: "Super Flexible", siteDescription: "<p><strong>5&nbsp;</strong>is a <a href="http://en.wikipedia.org/wiki/Number"><span class="s1">number</span></a>, <a href="http://en.wikipedia.org/wiki/Numeral_system"><span class="s1">numeral</span></a>, and <a href="http://en.wikipedia.org/wiki/Glyph"><span class="s1">glyph</span></a>. It is the <a href="http://en.wikipedia.org/wiki/Natural_number"><span class="s1">natural number</span></a> following <a href="http://en.wikipedia.org/wiki/4_(number)"><span class="s1">4</span></a> and preceding <a href="http://en.wikipedia.org/wiki/6_(number)"><span class="s1">6</span></a>.</p>", authenticUrl: "http://five-demo.squarespace.com", baseUrl: "http://five-demo.squarespace.com"},'

var collection = 'collection: { id: "50649e01e4b000b6a5f3008e", mainImageId: "517ebd22e4b05de3eecdda23", mainImage: {title: "",assetUrl: "http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/t/517ebd22e4b05de3eecdda23/1367260455626/5254898599_c446ebc474_o.jpg"},title: "Blog",navigationTitle: "Blog",urlId: "blog",typeName: "blog",fullUrl: "/blog/"},'

// 	items: [
// 		{
// 			urlId: "2012/9/27/fermentum-fringilla-inceptos",
// 			title: "Aenean Leo Ligula",
// 			sourceUrl: "http://airstreamlife.com/maze/2010/04/",
// 			body: "<div class="sqs-layout sqs-grid-12 columns-12" data-layout-label="Post Body" data-type="item" data-updated-on="1389269581454" id="item-50649e0be4b000b6a5f30098"><div class="row sqs-row"><div class="col sqs-col-12 span-12"><div class="sqs-block gallery-block sqs-block-gallery" data-block-json="&#123;&quot;design&quot;:&quot;grid&quot;,&quot;autoplay&quot;:false,&quot;autoplay-duration&quot;:5,&quot;controls&quot;:false,&quot;auto-crop&quot;:false,&quot;square-thumbs&quot;:true,&quot;thumbnails&quot;:false,&quot;thumbnail-strip-height&quot;:100,&quot;thumbnail-strip-margin&quot;:20,&quot;show-meta&quot;:true,&quot;meta-position&quot;:&quot;bottom&quot;,&quot;show-meta-on-hover&quot;:true,&quot;active-alignment&quot;:&quot;center&quot;,&quot;thumbnails-per-row&quot;:2,&quot;padding&quot;:20,&quot;lightbox&quot;:false,&quot;max-width&quot;:300,&quot;collectionId&quot;:&quot;517ebc20e4b05de3eecdd88b&quot;,&quot;transientGalleryId&quot;:&quot;517ebc20e4b05de3eecdd88b&quot;&#125;" data-block-type="8" id="block-d65682642d37c2e92549"><div class="sqs-block-content"><div class=" sqs-gallery-container sqs-gallery-block-grid sqs-gallery-thumbnails-per-row-2 sqs-gallery-block-show-meta sqs-gallery-block-meta-position-bottom sqs-gallery-block-meta-hover clear "> <div class="sqs-gallery"> <div class="slide" data-type="image"> <div class="margin-wrapper"> <a class="image-slide-anchor content-fill" > <noscript><img src="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/517ebc20e4b05de3eecdd88b/517ebc20e4b0f2c07592b89b/1367260235061/193636096_1f34d7a78d_o.jpg" alt=" Photo Credit:&amp;nbsp; tiarescott " /></noscript><img class="thumb-image" alt=" Photo Credit:&amp;nbsp; tiarescott " data-src="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/517ebc20e4b05de3eecdd88b/517ebc20e4b0f2c07592b89b/1367260235061/193636096_1f34d7a78d_o.jpg" data-image="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/517ebc20e4b05de3eecdd88b/517ebc20e4b0f2c07592b89b/1367260235061/193636096_1f34d7a78d_o.jpg" data-image-dimensions="600x898" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="517ebc20e4b0f2c07592b89b" data-type="image" /> </a> <div class="image-slide-title"></div> </div> </div> <div class="slide" data-type="image"> <div class="margin-wrapper"> <a class="image-slide-anchor content-fill" > <noscript><img src="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/517ebc20e4b05de3eecdd88b/517ebc20e4b0a81a45895ac6/1367260225175/5970284850_68a8c7333e_o.jpg" alt=" Photo Credit:&amp;nbsp; Webb Zahn " /></noscript><img class="thumb-image" alt=" Photo Credit:&amp;nbsp; Webb Zahn " data-src="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/517ebc20e4b05de3eecdd88b/517ebc20e4b0a81a45895ac6/1367260225175/5970284850_68a8c7333e_o.jpg" data-image="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/517ebc20e4b05de3eecdd88b/517ebc20e4b0a81a45895ac6/1367260225175/5970284850_68a8c7333e_o.jpg" data-image-dimensions="3456x4608" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="517ebc20e4b0a81a45895ac6" data-type="image" /> </a> <div class="image-slide-title"></div> </div> </div> </div> </div> <style type="text/css" id="design-grid-css"> #block-d65682642d37c2e92549 .sqs-gallery-block-grid { margin-right: -20px; } #block-d65682642d37c2e92549 .sqs-gallery-block-grid .sqs-gallery-design-grid-slide .margin-wrapper { margin-right: 20px; margin-bottom: 20px; } </style> </div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-cf0496bb6c34b5213125"><div class="sqs-block-content"><h3>Nullam Nulla Eros</h3><p>Ultricies sit amet, nonummy id, imperdiet feugiat, pede. Sed lectus. Donec mollis hendrerit risus. Phasellus nec sem in justo pellentesque facilisis. Etiam imperdiet imperdiet orci. Nunc nec neque.</p><h3>Praesent</h3><p>Commodo cursus magna, vel scelerisque nisl consectetur et. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Nullam quis risus eget urna mollis ornare vel eu leo.</p><p>Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Donec sed odio dui. Aenean lacinia bibendum nulla sed consectetur. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div></div></div></div>",
// 			excerpt: ""
// 		},
// 		{
// 			urlId: "2013/4/21/vivamus-quis-mi",
// 			title: "Vivamus Quis Mi",
// 			sourceUrl: "",
// 			body: "<div class="sqs-layout sqs-grid-12 columns-12" data-layout-label="Post Body" data-type="item" id="item-517ebcbee4b01eeb7ae90c37"><div class="row sqs-row"><div class="col sqs-col-12 span-12"><div class="sqs-block quote-block sqs-block-quote" data-block-type="31" id="block-4ad26a66f29994f53f81"><div class="sqs-block-content"><figure> <blockquote> <span>&#147;</span>Quisque libero metus, condimentum nec, tempor a, commodo mollis, magna. Vestibulum ullamcorper mauris at ligula.<span>&#148;</span> </blockquote> <figcaption class="source">&mdash; Maecenas Malesuada</figcaption> </figure></div></div><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-92188cebf369c7407bbf"><div class="sqs-block-content"><p>Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc, quis gravida magna mi a libero. Fusce vulputate eleifend sapien. Vestibulum purus quam, scelerisque ut, mollis sed, nonummy id, metus. Nullam accumsan lorem in dui. Cras ultricies mi eu turpis hendrerit fringilla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In ac dui quis mi consectetuer lacinia.</p><p>Nam pretium turpis et arcu. Duis arcu tortor, suscipit eget, imperdiet nec, imperdiet iaculis, ipsum. Sed aliquam ultrices mauris. Integer ante arcu, accumsan a, consectetuer eget, posuere ut, mauris. Praesent adipiscing. Phasellus ullamcorper ipsum rutrum nunc. Nunc nonummy metus. Vestibulum volutpat pretium libero. Cras id dui. Aenean ut eros et nisl sagittis vestibulum.</p><p>Nullam nulla eros, ultricies sit amet, nonummy id, imperdiet feugiat, pede. Sed lectus. Donec mollis hendrerit risus. Phasellus nec sem in justo pellentesque facilisis. Etiam imperdiet imperdiet orci. Nunc nec neque. Phasellus leo dolor, tempus non, auctor et, hendrerit quis, nisi. Curabitur ligula sapien, tincidunt non, euismod vitae, posuere imperdiet, leo. Maecenas malesuada. Praesent congue erat at massa. Sed cursus turpis vitae tortor.</p><p></p></div></div></div></div></div>",
// 			excerpt: ""
// 		},
// 		{
// 			urlId: "2012/10/3/malesuada-justo-dolor-elit-amet",
// 			title: "Etiam ut Purus Mattis Mauris",
// 			sourceUrl: "http://hidden-films.com/2012/09/26/an-interview-with-paul-morrissey-2/",
// 			body: "<div class="sqs-layout sqs-grid-12 columns-12" data-layout-label="Post Body" data-type="item" id="item-506c50a6e4b04376cb18d46e"><div class="row sqs-row"><div class="col sqs-col-12 span-12"><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-60046b256f6cfe216580"><div class="sqs-block-content"> <div class="image-block-outer-wrapper layout-caption-below "> <div class="intrinsic" style="max-width:697.0px;"> <div style="padding-bottom:66.42754364013672%;" class="image-block-wrapper " data-description="&lt;p&gt;View from the Bow&lt;/p&gt;"> <noscript><img src="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/t/517ebbe6e4b0b0f0caf21ef0/1367260135994/Screen%20Shot%202013-04-26%20at%203.58.18%20PM.png" alt="View from the Bow" /></noscript><img class="thumb-image" alt="View from the Bow" data-src="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/t/517ebbe6e4b0b0f0caf21ef0/1367260135994/Screen%20Shot%202013-04-26%20at%203.58.18%20PM.png" data-image="http://static.squarespace.com/static/5016d42984ae3ecc9e018d91/t/517ebbe6e4b0b0f0caf21ef0/1367260135994/Screen%20Shot%202013-04-26%20at%203.58.18%20PM.png" data-image-dimensions="697x463" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="517ebbe6e4b0b0f0caf21ef0" data-type="image" /> </div> <div class="image-caption-wrapper"> <div class="image-caption"><p>View from the Bow</p></div> </div> </div> </div> </div></div></div></div><div class="row sqs-row"><div class="col sqs-col-12 span-12"><div class="sqs-block html-block sqs-block-html" data-block-type="2" id="block-1fb80c8d44ac23750d7f"><div class="sqs-block-content"><p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Maecenas sed diam eget risus varius blandit sit amet non magna. Etiam porta sem malesuada magna mollis euismod. Nullam id dolor id nibh ultricies.</p><p>Maecenas faucibus mollis interdum. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Nullam id dolor id nibh ultricies vehicula ut id elit. Nullam quis risus eget urna mollis ornare vel eu leo. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis.</p></div></div></div></div></div>",
// 			excerpt: ""
// 		}
// 	]
// }

		// attach the .equals method to Array's prototype to call it on any array
		Array.prototype.equals = function (array) {
		    // if the other array is a falsy value, return
		    if (!array)
		        return false;

		    // compare lengths - can save a lot of time 
		    if (this.length != array.length)
		        return false;

		    for (var i = 0, l=this.length; i < l; i++) {
		        // Check if we have nested arrays
		        if (this[i] instanceof Array && array[i] instanceof Array) {
		            // recurse into the nested arrays
		            if (!this[i].equals(array[i]))
		                return false;       
		        }           
		        else if (this[i] != array[i]) { 
		            // Warning - two different object instances will never be equal: {x:20} != {x:20}
		            return false;   
		        }           
		    }       
		    return true;
		}  


		var inputArea = document.getElementById('editor');
		var compareArea = document.getElementById('compare');
		var button = document.getElementById('check');

		var editor = CodeMirror(function(elt){
			inputArea.parentNode.replaceChild(elt, inputArea);
		}, {
			value: 'begin typing',
  		lineNumbers: true,
  		mode: 'htmlmixed',
  		theme: 'monokai',
  		autofocus: true
		});

		var compareEditor = CodeMirror(function(elt){
			compareArea.parentNode.replaceChild(elt, compareArea);
		}, {
			value: '{.section website}\n<h1>{siteTitle}</h1>\n{.end}',
  		lineNumbers: true,
  		mode: 'htmlmixed',
  		theme: 'monokai'
		});

		var answer = compareEditor.getValue().split(/\s+(?![^\[]*\]|[^(]*\)|[^\{]*})/);
		answer = answer.filter(function(n){ return n != '' });
		var input;

		button.addEventListener('click', function(e){
			input = editor.getValue().split(/\s+(?![^\[]*\]|[^(]*\)|[^\{]*})/);
			input = input.filter(function(n){ return n != '' });

			if(input.equals(answer)){
				alert('correct!');
			} else {
				alert('wrong LOL');
			}

		});
